<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Hărți Interactive cu D3.js</title>
  <!-- Link către fișierul CSS -->
  <link rel="stylesheet" href="style.css">
  <!-- Include D3.js -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <!-- Include html2canvas -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
  <div class="container">
    <!-- Panoul de Control (dreapta) -->
    <div class="control-panel">
      <h2>Control Panel</h2>

      <!-- Select pentru hărți -->
      <div class="option-section">
        <label for="mapSelector">Selectează Harta:</label>
        <select id="mapSelector" class="form-control">
          <option value="md.json">Mapă MD</option>
          <option value="europe.geojson">Europa</option>
          <!-- Adaugă mai multe opțiuni de hărți după necesități -->
        </select>
      </div>

      <!-- Input pentru Titlu -->
      <div class="option-section">
        <label for="infographicTitle">Titlu Infografic:</label>
        <input type="text" id="infographicTitle" class="form-control" placeholder="Introdu titlul...">
      </div>

      <!-- Input pentru Sursa Datelor -->
      <div class="option-section">
        <label for="dataSource">Sursa Datelor:</label>
        <input type="text" id="dataSource" class="form-control" placeholder="Introdu sursa datelor...">
      </div>

      <!-- Opțiuni pentru Gradient -->
      <div class="option-section">
        <label for="presetGradient">Gradient Preset:</label>
        <select id="presetGradient" class="form-control">
          <option value="">Selectează Gradient</option>
          <option value="blueGreen">Albastru la Verde</option>
          <option value="redYellow">Roșu la Galben</option>
          <option value="purplePink">Mov la Roz</option>
          <option value="orangeBlue">Portocaliu la Albastru</option>
          <option value="grey">Gri</option>
        </select>
      </div>

      <div class="option-section">
        <label for="gradientStart">Culoare Start Gradient:</label>
        <input type="color" id="gradientStart" class="form-control" value="#2A73FF">
      </div>

      <div class="option-section">
        <label for="gradientEnd">Culoare End Gradient:</label>
        <input type="color" id="gradientEnd" class="form-control" value="#2A73FF">
      </div>

      <div class="option-section">
        <button id="applyGradient" class="btn btn-primary">Aplică Gradient</button>
      </div>

      <!-- Gestionarea Categoriilor -->
      <div class="option-section">
        <h3>Gestionare Categorii</h3>
        <div class="category-inputs">
          <input type="text" id="newCategoryName" class="form-control" placeholder="Nume Categorie">
          <input type="color" id="newCategoryColor" class="form-control" value="#FF5733">
        </div>
        <button id="addCategory" class="btn btn-secondary">Adaugă Categorie</button>
        <ul id="categoryList" class="category-list"></ul>
      </div>

      <!-- Resetare Zoom -->
      <div class="option-section">
        <button id="resetZoom" class="btn btn-info">Resetează Zoom-ul</button>
      </div>

      <!-- Resetare Tot -->
      <div class="option-section">
        <button id="resetAll" class="btn btn-danger">Resetează Tot</button>
      </div>

      <!-- Exportare Harta -->
      <div class="option-section">
        <button id="exportMap" class="btn btn-success">Exportă Harta ca PNG</button>
      </div>

      <!-- Tabelul Regiunilor -->
      <div class="option-section">
        <h3>Tabel Regiuni</h3>
        <table id="regionTable" class="region-table">
          <thead>
            <tr>
              <th>Regiune</th>
              <th>Valoare</th>
              <th>Categorie</th>
            </tr>
          </thead>
          <tbody>
            <!-- Rândurile vor fi generate dinamic -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Coloana pentru Harta (stânga) -->
    <div class="map-column">
      <!-- SVG-ul pentru hartă -->
      <svg id="mapSVG" width="800" height="600">
        <g class="map-group"></g>

        <!-- Grup pentru Legendă -->
        <g id="legendGroup" class="legend-group">
          <rect id="legendBackground" x="0" y="0" width="200" height="100" fill="white" stroke="black" stroke-width="1"></rect>
          <text id="legendTitle" x="10" y="20" font-size="16" font-weight="bold">Legendă</text>
          <g id="legendItems"></g>
          <circle id="editLegendTitle" cx="180" cy="20" r="10" fill="#f0ad4e" cursor="pointer" title="Edit Legend Title">✏️</circle>
          <circle id="deleteLegend" cx="200" cy="20" r="10" fill="#d9534f" cursor="pointer" title="Delete Legend">🗑️</circle>
          <circle id="toggleLegend" cx="160" cy="60" r="10" fill="#5bc0de" cursor="pointer" title="Toggle Legend Visibility">🔍</circle>
        </g>

        <!-- Grup pentru Titlu -->
        <g id="titleGroup" class="title-group">
          <text id="mapTitle" x="20" y="40" font-size="24" font-weight="bold">Titlu Implicitar</text>
        </g>

        <!-- Grup pentru Sursa Datelor -->
        <g id="dataSourceGroup" class="footer data-source-group">
          <rect id="dataSourceBackground" x="0" y="0" width="200" height="30" fill="white" stroke="black" stroke-width="1"></rect>
          <text id="dataSourceText" x="10" y="20" font-size="14">Sursa datelor: N/A</text>
        </g>
      </svg>

      <!-- Tooltip -->
      <div class="tooltip" style="visibility: hidden;"></div>
    </div>
  </div>

  <!-- Include fișierul JavaScript -->
  <script src="script.js"></script>
</body>
</html>
