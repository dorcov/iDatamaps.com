<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Harta Interactivă iData</title>
  
  <!-- Includerea Fonturilor de la Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- Legătura către fișierul CSS -->
  <link rel="stylesheet" href="style.css" />
  
  <!-- Incluzând D3.js pentru manipularea hărților -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  
  <!-- Incluzând html2canvas pentru exportarea hărții -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" crossorigin="anonymous"></script>

  <!-- Include Turf.js for point on surface calculation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Turf.js/6.5.0/turf.min.js"></script>

  <style>
    .value-label {
      /* Add any necessary positioning and styling */
      position: absolute;
      pointer-events: none;
      /* Ensure fonts are rendered correctly */
      font-family: 'Roboto', sans-serif;
    }
    /* Style for gradient preview inside the select */
    .gradient-option {
      background: linear-gradient(to right, #2A73FF, #00FF7F);
      display: inline-block;
      width: 100px;
      height: 10px;
      vertical-align: middle;
      margin-left: 8px;
    }
    svg {
      /* Add styles to ensure no padding or margins interfere with grid alignment */
      width: 100%;
      height: 100%;
      display: block;
    }
    
    .grid-line {
      stroke: #ccc;
      stroke-width: 1;
      stroke-dasharray: 4;
    }
    .slider {
      -webkit-appearance: none;
      width: 100%;
      height: 8px;
      background: #ddd;
      outline: none;
      opacity: 0.7;
      transition: opacity 0.2s;
      border-radius: 4px;
    }

    .slider:hover {
      opacity: 1;
    }

    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      background: #007bff;
      cursor: pointer;
      border-radius: 50%;
    }

    .slider::-moz-range-thumb {
      width: 20px;
      height: 20px;
      background: #007bff;
      cursor: pointer;
      border-radius: 50%;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="map-column">
      <svg id="mapSVG">
        <g class="map-group"></g>
        <!-- Keep shapes independent from map zoom: -->
        <g id="shapesGroup"></g>
      </svg>
      
      <!-- Footer în dreapta jos -->
      <div class="footer">
        <span>Creat cu iDataMaps.app Versiune Beta</span>
      </div>
    </div>
    <div class="right-panel">
      <div class="control-panel">

        <section class="control-group">
          <!-- Removed: <h3 data-key="controlPanelTitle">Setările hărții</h3> -->
          <!-- Secțiunea de Selectare a Hărții -->
          <div class="option-section">
            <h4 data-key="selectMap">Selectează Harta</h4>
            <select id="mapSelector" class="custom-select">
              <option value="combinedMD.geojson">Moldova</option>
              <option value="regiuni.geojson">Moldova Regiuni</option>
              <option value="combinedRO.geojson">România</option>
              <option value="combinedEU.geojson">Europa</option>
              <!-- <option value="world.geojson">World</option> -->
              <option value="combined.geojson">Regiuni statistice iData</option>
              <!-- <option value="urss.geojson">USSR</option>
              <option value="improm.geojson">Imperiul Roman</option> -->
            </select>
          </div>

          <!-- Add this section after the map selector section -->
          <div class="option-section">
            <h4 data-key="projection">Proiecție Hartă</h4>
            <select id="projectionSelector" class="custom-select">
              <!-- Options will be added dynamically -->
            </select>
          </div>

          <!-- Secțiunea de Setări Canvas -->
          <div class="option-section">
            <h4 data-key="backgroundSettings">Setările fundalului</h4>
            <label for="canvasColor" data-key="color">Culoare:</label>
            <input type="color" id="canvasColor" value="#ffffff" />

            <label for="canvasTransparency" data-key="transparency">Transparență:</label>
            <input type="range" id="canvasTransparency" class="slider" min="0" max="1" step="0.1" value="1" />

            <!-- Removed canvasWidth label and input -->

            <label for="canvasHeight" data-key="canvasHeight">Înălțimea pânzei (px):</label>
            <input
              type="range"
              id="canvasHeight"
              class="slider"
              value="600"
              min="100"
              max="1200"
              step="10"
            />
          </div>

          <!-- Secțiunea de Resetare și Export -->
          <div class="option-section">
            <div class="button-group">
              <button id="exportMap" class="btn btn-export" data-key="exportAsPNG">Exportă ca PNG</button>
            </div>
          </div>
        </section>

        <section class="control-group">
          <!-- Removed: <h3 data-key="gradient">Gradient</h3> -->
          <div class="option-section">
            <h4 data-key="selectGradient">Selectează Gradient</h4>
            <div class="gradient-options">
              <div class="custom-gradient">
                <div class="color-picker">
                  <label for="gradientStart" data-key="minValueColor">Culoare valori minime:</label>
                  <input type="color" id="gradientStart" value="#FF0000" />
                </div>
                <button id="addIntermediateColor" class="btn" data-key="addIntermediateColor">
                  Adaugă Culoare Intermediară
                </button>
                <div id="intermediateColors">
                  <!-- Each color input plus remove button goes here -->
                </div>
                <div class="color-picker">
                  <label for="gradientEnd" data-key="maxValueColor">Culoare valori maxime:</label>
                  <input type="color" id="gradientEnd" value="#009E4F" />
                </div>
                <button id="applyGradient" class="btn btn-primary" data-key="applyCustomGradient">Aplică Gradient</button>
              </div>
            </div>
          </div>
        </section>

        <section class="control-group">
          <h3 data-key="categoricalData">Date categorice</h3>
          <!-- Secțiunea de Gestionare Categorii -->
          <div class="option-section">
            <h4 data-key="chooseCategories">Adaugă una sau mai multe categorii</h4>
            <div class="category-manager">
              <div class="add-category">
                <input type="text" id="newCategoryName" class="input-text" data-placeholder="categoryNamePlaceholder" placeholder="Nume Categorie" />
                <input type="color" id="newCategoryColor" value="#FF5733" />
                <button id="addCategory" class="btn btn-primary" data-key="addCategory">Adaugă Categorie</button>
              </div>
              <div class="category-list">
                <ul id="categoryList">
                  <!-- Categorii adăugate din JavaScript -->
                </ul>
              </div>
            </div>
          </div>
        </section>

        <!-- Secțiunea de Tabel de Date -->
        <section class="control-group">
          <h4 data-key="dataTable">Tabel de Date</h4>
          <!-- Adăugăm secțiunea de import CSV -->
          <div class="csv-import-section">
            <h5 data-key="csvImport">Import din CSV</h5>
            <input type="file" id="csvFileInput" accept=".csv" class="input-text" />
            <button id="importCSV" class="btn btn-primary" data-key="importCSV">Importă CSV</button>
            <div class="csv-template">
              <small data-key="csvTemplate">Format CSV: Region,Value</small>
              <button id="downloadTemplate" class="btn btn-export" data-key="downloadTemplate">Descarcă Template</button>
            </div>
          </div>
          <!-- Adăugăm secțiunea de căutare și sortare -->
          <div class="table-controls">
            <div class="search-container">
              <input type="text" id="searchRegions" class="input-text" data-placeholder="searchRegionsPlaceholder" placeholder="Caută regiuni..." />
            </div>
            <div class="sort-controls">
              <button id="sortByName" class="btn btn-secondary" data-key="sortByName">
                Sortare după nume ↕
              </button>
              <button id="sortByValue" class="btn btn-secondary" data-key="sortByValue">
                Sortare după valoare ↕
              </button>
            </div>
          </div>
          <div class="table-container">
            <table id="regionTable">
              <thead>
                <tr>
                  <th data-key="regionCountry">Regiune/Țară</th>
                  <th data-key="value">Valoare</th>
                  <th data-key="category">Categorie</th>
                </tr>
              </thead>
              <tbody>
                <!-- Populat din JavaScript -->
              </tbody>
            </table>
          </div>
          <!-- Move statistics container here, after the reset button -->
          <!-- Remove this section from the data table area -->
          <!-- <div class="statistics-container">
            <div class="stat-item">
              <span data-key="mean">Media:</span>
              <span id="meanValue">0</span>
            </div>
            <div class="stat-item">
              <span data-key="median">Mediana:</span>
              <span id="medianValue">0</span>
            </div>
          </div> -->
          <div class="button-group">
            <button id="resetData" class="btn btn-reset" data-key="resetData">Resetează Datele</button>
          </div>
        </section>

        <!-- Add after the existing data table section -->
        <section class="control-group">
          <h4 data-key="dataAnalysis">Analiză Date</h4>
          
          <!-- Quick Stats Row -->
          <div class="quick-stats">
            <div class="stat-box">
              <span data-key="totalRegions">Total Regiuni:</span>
              <span id="totalRegions">0</span>
            </div>
            <div class="stat-box">
              <span data-key="mean">Medie:</span>
              <span id="avgValue">0</span>
            </div>
            <div class="stat-box">
              <span data-key="standardDev">Dev. Standard:</span>
              <span id="stdDevValue">0</span>
            </div>
            <div class="stat-box">
              <span data-key="median">Mediană:</span>
              <span id="medianValue">0</span>
            </div>
            <div class="stat-box">
              <span data-key="totalValue">Total:</span>
              <span id="totalValue">0</span>
            </div>
          </div>

          <!-- Add after quick-stats div and before analysis-table-container -->
          <div class="category-stats">
            <h5 data-key="categoryStatistics">Statistici Categorii</h5>
            <div id="categoryStatsContainer">
              <!-- Will be populated dynamically -->
            </div>
          </div>
        
          <!-- Analysis Controls -->
          <div class="analysis-controls">
            <!-- Remove the buttons -->
          </div>
        
          <!-- Analysis Table -->
          <div class="analysis-table-container">
            <table id="analysisTable">
              <thead>
                <tr>
                  <th data-key="regionCountry">Regiune/Țară</th>
                  <th data-key="value">Valoare</th>
                  <th data-key="percentage">% din Total</th>
                  <th data-key="category">Categorie</th>
                  <th data-key="trend">Trend</th>
                </tr>
              </thead>
              <tbody>
                <!-- Will be populated dynamically -->
              </tbody>
              <tfoot>
                <tr>
                  <td data-key="total">Total</td>
                  <td id="tableTotalValue">0</td>
                  <td>100%</td>
                  <td>-</td>
                  <td>-</td>
                </tr>
              </tfoot>
            </table>
          </div>
        </section>

        <!-- Secțiunea pentru Controlul Valorilor pe Harta -->
        <section class="control-group">
          <h4 data-key="controlValuesOnMap">Control Valori pe Harta</h4>
          <div class="control-values">
            
            <div class="option">
              <label for="toggleValues" data-key="toggleValues">Afișează/Ascunde Valorile:</label>
              <input type="checkbox" id="toggleValues" checked />
            </div>
            
            <div class="option">
              <label for="valuesFontSize" data-key="fontSize">Mărime Font:</label>
              <input
                type="number"
                id="valuesFontSize"
                class="input-text"
                value="14"
                min="10"
                max="50"
              />
            </div>
            
            <div class="option">
              <label for="valuesColor" data-key="fontColor">Culoare Font:</label>
              <input type="color" id="valuesColor" value="#000000" />
            </div>

            <div class="option">
              <label for="valuesFont" data-key="font">Font Valorilor:</label>
              <select id="valuesFont" class="custom-select">
                <option value="'Roboto', sans-serif">Roboto</option>
                <option value="'Montserrat', sans-serif">Montserrat</option>
                <option value="'Open Sans', sans-serif">Open Sans</option>
                <option value="'Lobster', cursive">Lobster</option>
                <option value="'Playfair Display', serif">Playfair Display</option>
                <option value="'Fira Sans', sans-serif">Fira Sans</option>
                <option value="'Merriweather', serif">Merriweather</option>
                <option value="'Bebas Neue', cursive">Bebas Neue</option>
                <option value="'Oswald', sans-serif">Oswald</option>
                <option value="'Source Sans Pro', sans-serif">Source Sans Pro</option>
              </select>
            </div>
            
            <div class="option">
              <label for="valuesBold" data-key="boldValues">Valori Bold:</label>
              <input type="checkbox" id="valuesBold" />
            </div>
            
          </div>
        </section>


        <!-- Secțiunea de Adăugare Titlu -->
        <section class="control-group">
          <h4 data-key="addTitle">Adaugă Titlu</h4>
          <input type="text" id="titleInput" class="input-text" data-placeholder="titlePlaceholder" placeholder="Introdu Titlul" />
          <div class="title-options">
            <label for="titleFont" data-key="font">Font:</label>
            <select id="titleFont" class="custom-select">
              <option value="'Roboto', sans-serif">Roboto</option>
              <option value="'Montserrat', sans-serif">Montserrat</option>
              <option value="'Open Sans', sans-serif">Open Sans</option>
              <option value="'Lobster', cursive">Lobster</option>
              <option value="'Playfair Display', serif">Playfair Display</option>
              <option value="'Fira Sans', sans-serif">Fira Sans</option>
              <option value="'Merriweather', serif">Merriweather</option>
              <option value="'Bebas Neue', cursive">Bebas Neue</option>
              <option value="'Oswald', sans-serif">Oswald</option>
              <option value="'Source Sans Pro', sans-serif">Source Sans Pro</option>
            </select>
            
            <label for="titleSize" data-key="size">Mărime (px):</label>
            <input type="number" id="titleSize" class="input-text" value="24" min="10" max="100" />
            
            <div>
              <label for="titleColor" data-key="color">Culoare:</label>
              <input type="color" id="titleColor" value="#000000" />
            </div>
            
            <div>
              <label for="titleBold" data-key="bold">Bold:</label>
              <input type="checkbox" id="titleBold" />
            </div>
            
            <div>
              <label for="titleItalic" data-key="italic">Italic:</label>
              <input type="checkbox" id="titleItalic" />
            </div>
            
          </div>
          <button id="addTitle" class="btn btn-primary" data-key="addTitleButton">Adaugă Titlu</button>
          <button id="removeTitle" class="btn btn-reset" data-key="removeTitleButton">Elimină Titlu</button>
        </section>

        <section class="control-group">
          <h3 data-key="text">Text</h3>
          <!-- Secțiunea de Adăugare Text Liber -->
          <div class="option-section">
            <h4 data-key="addText">Adaugă Text</h4>
            <textarea id="freeTextInput" class="input-text" data-placeholder="textPlaceholder" placeholder="Introdu Textul" rows="4"></textarea>
            <div class="text-options">
              <label for="freeTextFont" data-key="font">Font:</label>
              <select id="freeTextFont" class="custom-select">
                <option value="'Roboto', sans-serif">Roboto</option>
                <option value="'Montserrat', sans-serif">Montserrat</option>
                <option value="'Open Sans', sans-serif">Open Sans</option>
                <option value="'Lobster', cursive">Lobster</option>
                <option value="'Playfair Display', serif">Playfair Display</option>
                <option value="'Fira Sans', sans-serif">Fira Sans</option>
                <option value="'Merriweather', serif">Merriweather</option>
                <option value="'Bebas Neue', cursive">Bebas Neue</option>
                <option value="'Oswald', sans-serif">Oswald</option>
                <option value="'Source Sans Pro', sans-serif">Source Sans Pro</option>
              </select>
              <label for="freeTextSize" data-key="size">Mărime (px):</label>
              <input type="number" id="freeTextSize" class="input-text" value="14" min="10" max="50" />
              <label for="freeTextColor" data-key="color">Culoare:</label>
              <input type="color" id="freeTextColor" value="#333333" />
              <div style="display: flex; align-items: center; gap: 8px;">
                <label for="freeTextBorder" data-key="border">Chenar:</label>
                <input type="checkbox" id="freeTextBorder" />
                
                <label for="freeTextBold" data-key="bold">Bold:</label>
                <input type="checkbox" id="freeTextBold" />
                
                <label for="freeTextItalic" data-key="italic">Italic:</label>
                <input type="checkbox" id="freeTextItalic" />
              </div>
              <!-- Add background transparency slider -->
              <label for="freeTextBgTransparency" data-key="backgroundTransparency">Transparență Fundal:</label>
              <input type="range" id="freeTextBgTransparency" class="slider" min="0" max="1" step="0.1" value="1" />
              <!-- Add background color picker for free text -->
              <label for="freeTextBgColor" data-key="backgroundColor">Culoare Fundal:</label>
              <input type="color" id="freeTextBgColor" value="#ffffff" />
            </div>
            <button id="addFreeText" class="btn btn-primary" data-key="addTextButton">Adaugă Text</button>
            <button id="removeFreeText" class="btn btn-reset" data-key="removeTextButton">Elimină Text</button>
          </div>
        </section>

        <section class="control-group">
          <h3 data-key="flags">Steaguri</h3>
          <div class="option-section">
            <h4 data-key="addFlag">Adaugă Steag</h4>
            <div class="flag-options">
              <!-- Add this search input before the country select -->
              <div class="flag-search">
                <label for="flagSearch" data-key="searchCountry">Caută țară:</label>
                <input 
                  type="text" 
                  id="flagSearch" 
                  class="input-text" 
                  placeholder="Caută țară..."
                  autocomplete="off"
                />
              </div>

              <label for="flagCountry" data-key="selectCountry">Țară:</label>
              <select id="flagCountry" class="custom-select">
                <option value="af">Afghanistan</option>
                <option value="ax">Åland Islands</option>
                <option value="al">Albania</option>
                <option value="dz">Algeria</option>
                <option value="as">American Samoa</option>
                <option value="ad">Andorra</option>
                <option value="ao">Angola</option>
                <option value="ai">Anguilla</option>
                <option value="aq">Antarctica</option>
                <option value="ag">Antigua and Barbuda</option>
                <option value="ar">Argentina</option>
                <option value="am">Armenia</option>
                <option value="aw">Aruba</option>
                <option value="au">Australia</option>
                <option value="at">Austria</option>
                <option value="az">Azerbaijan</option>
                <option value="bs">Bahamas</option>
                <option value="bh">Bahrain</option>
                <option value="bd">Bangladesh</option>
                <option value="bb">Barbados</option>
                <option value="by">Belarus</option>
                <option value="be">Belgium</option>
                <option value="bz">Belize</option>
                <option value="bj">Benin</option>
                <option value="bm">Bermuda</option>
                <option value="bt">Bhutan</option>
                <option value="bo">Bolivia</option>
                <option value="ba">Bosnia and Herzegovina</option>
                <option value="bw">Botswana</option>
                <option value="bv">Bouvet Island</option>
                <option value="br">Brazil</option>
                <option value="bg">Bulgaria</option>
                <option value="bf">Burkina Faso</option>
                <option value="bi">Burundi</option>
                <option value="kh">Cambodia</option>
                <option value="cm">Cameroon</option>
                <option value="ca">Canada</option>
                <option value="cv">Cape Verde</option>
                <option value="ky">Cayman Islands</option>
                <option value="cf">Central African Republic</option>
                <option value="td">Chad</option>
                <option value="cl">Chile</option>
                <option value="cn">China</option>
                <option value="cx">Christmas Island</option>
                <option value="co">Colombia</option>
                <option value="km">Comoros</option>
                <option value="cg">Congo</option>
                <option value="cd">Congo (Democratic Republic)</option>
                <option value="ck">Cook Islands</option>
                <option value="cr">Costa Rica</option>
                <option value="ci">Côte d'Ivoire</option>
                <option value="hr">Croatia</option>
                <option value="cu">Cuba</option>
                <option value="cy">Cyprus</option>
                <option value="cz">Czech Republic</option>
                <option value="dk">Denmark</option>
                <option value="dj">Djibouti</option>
                <option value="dm">Dominica</option>
                <option value="do">Dominican Republic</option>
                <option value="ec">Ecuador</option>
                <option value="eg">Egypt</option>
                <option value="sv">El Salvador</option>
                <option value="gq">Equatorial Guinea</option>
                <option value="er">Eritrea</option>
                <option value="ee">Estonia</option>
                <option value="et">Ethiopia</option>
                <option value="fk">Falkland Islands</option>
                <option value="fo">Faroe Islands</option>
                <option value="fj">Fiji</option>
                <option value="fi">Finland</option>
                <option value="fr">France</option>
                <option value="gf">French Guiana</option>
                <option value="pf">French Polynesia</option>
                <option value="ga">Gabon</option>
                <option value="gm">Gambia</option>
                <option value="ge">Georgia</option>
                <option value="de">Germany</option>
                <option value="gh">Ghana</option>
                <option value="gi">Gibraltar</option>
                <option value="gr">Greece</option>
                <option value="gl">Greenland</option>
                <option value="gd">Grenada</option>
                <option value="gp">Guadeloupe</option>
                <option value="gu">Guam</option>
                <option value="gt">Guatemala</option>
                <option value="gg">Guernsey</option>
                <option value="gn">Guinea</option>
                <option value="gw">Guinea-Bissau</option>
                <option value="gy">Guyana</option>
                <option value="ht">Haiti</option>
                <option value="hn">Honduras</option>
                <option value="hk">Hong Kong</option>
                <option value="hu">Hungary</option>
                <option value="is">Iceland</option>
                <option value="in">India</option>
                <option value="id">Indonesia</option>
                <option value="ir">Iran</option>
                <option value="iq">Iraq</option>
                <option value="ie">Ireland</option>
                <option value="im">Isle of Man</option>
                <option value="il">Israel</option>
                <option value="it">Italy</option>
                <option value="jm">Jamaica</option>
                <option value="jp">Japan</option>
                <option value="je">Jersey</option>
                <option value="jo">Jordan</option>
                <option value="kz">Kazakhstan</option>
                <option value="ke">Kenya</option>
                <option value="ki">Kiribati</option>
                <option value="kp">Korea (North)</option>
                <option value="kr">Korea (South)</option>
                <option value="kw">Kuwait</option>
                <option value="kg">Kyrgyzstan</option>
                <option value="la">Laos</option>
                <option value="lv">Latvia</option>
                <option value="lb">Lebanon</option>
                <option value="ls">Lesotho</option>
                <option value="lr">Liberia</option>
                <option value="ly">Libya</option>
                <option value="li">Liechtenstein</option>
                <option value="lt">Lithuania</option>
                <option value="lu">Luxembourg</option>
                <option value="mo">Macao</option>
                <option value="mk">Macedonia</option>
                <option value="mg">Madagascar</option>
                <option value="mw">Malawi</option>
                <option value="my">Malaysia</option>
                <option value="mv">Maldives</option>
                <option value="ml">Mali</option>
                <option value="mt">Malta</option>
                <option value="mh">Marshall Islands</option>
                <option value="mq">Martinique</option>
                <option value="mr">Mauritania</option>
                <option value="mu">Mauritius</option>
                <option value="yt">Mayotte</option>
                <option value="mx">Mexico</option>
                <option value="fm">Micronesia</option>
                <option value="md" selected>Moldova</option>
                <option value="mc">Monaco</option>
                <option value="mn">Mongolia</option>
                <option value="me">Montenegro</option>
                <option value="ms">Montserrat</option>
                <option value="ma">Morocco</option>
                <option value="mz">Mozambique</option>
                <option value="mm">Myanmar</option>
                <option value="na">Namibia</option>
                <option value="nr">Nauru</option>
                <option value="np">Nepal</option>
                <option value="nl">Netherlands</option>
                <option value="nc">New Caledonia</option>
                <option value="nz">New Zealand</option>
                <option value="ni">Nicaragua</option>
                <option value="ne">Niger</option>
                <option value="ng">Nigeria</option>
                <option value="nu">Niue</option>
                <option value="nf">Norfolk Island</option>
                <option value="mp">Northern Mariana Islands</option>
                <option value="no">Norway</option>
                <option value="om">Oman</option>
                <option value="pk">Pakistan</option>
                <option value="pw">Palau</option>
                <option value="ps">Palestine</option>
                <option value="pa">Panama</option>
                <option value="pg">Papua New Guinea</option>
                <option value="py">Paraguay</option>
                <option value="pe">Peru</option>
                <option value="ph">Philippines</option>
                <option value="pn">Pitcairn</option>
                <option value="pl">Poland</option>
                <option value="pt">Portugal</option>
                <option value="pr">Puerto Rico</option>
                <option value="qa">Qatar</option>
                <option value="re">Réunion</option>
                <option value="ro">Romania</option>
                <option value="ru">Russia</option>
                <option value="rw">Rwanda</option>
                <option value="sh">Saint Helena</option>
                <option value="kn">Saint Kitts and Nevis</option>
                <option value="lc">Saint Lucia</option>
                <option value="pm">Saint Pierre and Miquelon</option>
                <option value="vc">Saint Vincent and the Grenadines</option>
                <option value="ws">Samoa</option>
                <option value="sm">San Marino</option>
                <option value="st">São Tomé and Príncipe</option>
                <option value="sa">Saudi Arabia</option>
                <option value="sn">Senegal</option>
                <option value="rs">Serbia</option>
                <option value="sc">Seychelles</option>
                <option value="sl">Sierra Leone</option>
                <option value="sg">Singapore</option>
                <option value="sk">Slovakia</option>
                <option value="si">Slovenia</option>
                <option value="sb">Solomon Islands</option>
                <option value="so">Somalia</option>
                <option value="za">South Africa</option>
                <option value="gs">South Georgia</option>
                <option value="ss">South Sudan</option>
                <option value="es">Spain</option>
                <option value="lk">Sri Lanka</option>
                <option value="sd">Sudan</option>
                <option value="sr">Suriname</option>
                <option value="sj">Svalbard and Jan Mayen</option>
                <option value="sz">Swaziland</option>
                <option value="se">Sweden</option>
                <option value="ch">Switzerland</option>
                <option value="sy">Syria</option>
                <option value="tw">Taiwan</option>
                <option value="tj">Tajikistan</option>
                <option value="tz">Tanzania</option>
                <option value="th">Thailand</option>
                <option value="tl">Timor-Leste</option>
                <option value="tg">Togo</option>
                <option value="tk">Tokelau</option>
                <option value="to">Tonga</option>
                <option value="tt">Trinidad and Tobago</option>
                <option value="tn">Tunisia</option>
                <option value="tr">Turkey</option>
                <option value="tm">Turkmenistan</option>
                <option value="tc">Turks and Caicos Islands</option>
                <option value="tv">Tuvalu</option>
                <option value="ug">Uganda</option>
                <option value="ua">Ukraine</option>
                <option value="ae">United Arab Emirates</option>
                <option value="gb">United Kingdom</option>
                <option value="us">United States</option>
                <option value="uy">Uruguay</option>
                <option value="uz">Uzbekistan</option>
                <option value="vu">Vanuatu</option>
                <option value="va">Vatican City</option>
                <option value="ve">Venezuela</option>
                <option value="vn">Vietnam</option>
                <option value="vg">Virgin Islands (British)</option>
                <option value="vi">Virgin Islands (US)</option>
                <option value="wf">Wallis and Futuna</option>
                <option value="eh">Western Sahara</option>
                <option value="ye">Yemen</option>
                <option value="zm">Zambia</option>
                <option value="zw">Zimbabwe</option>
              </select>

              <label for="flagSize" data-key="flagSize">Mărime:</label>
              <select id="flagSize" class="custom-select">
                <option value="w20">20px</option>
                <option value="w40">40px</option>
                <option value="w80">80px</option>
                <option value="w160">160px</option>
                <option value="w240">240px</option>
                <option value="w320">320px</option>
                <option value="w480">480px</option>
                <option value="w640">640px</option>
              </select>

              <div class="flag-preview" id="flagPreview">
                <!-- Flag preview will be shown here -->
              </div>
            </div>
            <button id="addFlag" class="btn btn-primary" data-key="addFlagButton">Adaugă Steag</button>
            <button id="removeFlag" class="btn btn-reset" data-key="removeFlagButton">Elimină Steag</button>
          </div>
        </section>

        <section class="control-group">
          <h3 data-key="styleLegends">Stilizează legendele</h3>
          <div class="legend-styling">
            <!-- Adăugăm acest grup nou pentru titlul legendei -->
            <div class="control-group">
              <label for="legendTitle" data-key="legendTitle">Titlul Legendei:</label>
              <input
                type="text"
                id="legendTitle"
                class="input-text legend-title-input"
                data-key="legendTitle"
                placeholder=""
                value=""
              />
            </div>

            <!-- Add this before the existing legend controls -->
            <div class="control-group">
              <label for="legendIntervals" data-key="legendIntervals">Număr de intervale:</label>
              <input
                type="number"
                id="legendIntervals"
                class="input-text"
                value="5"
                min="2"
                max="10"
              />
              <div class="legend-sort-direction">
                <label for="legendSortDirection" data-key="sortDirection">Sortare:</label>
                <select id="legendSortDirection" class="custom-select">
                    <option value="ascending" data-key="sortAscending">↑ Ascendent</option>
                    <option value="descending" data-key="sortDescending">↓ Descendent</option>
                </select>
              </div>
            </div>

            <!-- Adăugăm controale pentru intervalele valorilor -->
            <div class="control-group">
              <label for="legendDecimals" data-key="legendDecimals">Număr de zecimale:</label>
              <input
                type="number"
                id="legendDecimals"
                class="input-text"
                value="1"
                min="0"
                max="5"
              />
            </div>

            <!-- Grup 1: Font -->
            <div class="control-group">
              <label for="legendFont" data-key="font">Font:</label>
              <select id="legendFont" class="custom-select">
                <option value="Roboto, sans-serif">Roboto</option>
                <option value="Montserrat, sans-serif">Montserrat</option>
                <option value="Open Sans, sans-serif">Open Sans</option>
                <option value="Lobster, cursive">Lobster</option>
                <option value="'Playfair Display', serif">Playfair Display</option>
                <option value="'Fira Sans', sans-serif">Fira Sans</option>
                <option value="'Merriweather', serif">Merriweather</option>
                <option value="'Bebas Neue', cursive">Bebas Neue</option>
                <option value="'Oswald', sans-serif">Oswald</option>
                <option value="'Source Sans Pro', sans-serif">Source Sans Pro</option>
              </select>
            </div>
        
            <!-- Grup 2: Mărime Font -->
            <div class="control-group">
              <label for="legendFontSize" data-key="fontSize">Mărime Font (px):</label>
              <input
                type="number"
                id="legendFontSize"
                class="input-text"
                value="14"
                min="10"
                max="50"
              />
            </div>
        
            <!-- Grup 3: Stil Font -->
            <div class="control-group">
              <label for="legendFontStyle" data-key="fontStyle">Stil Font:</label>
              <select id="legendFontStyle" class="custom-select">
                <option value="normal">Normal</option>
                <option value="italic">Italic</option>
                <option value="bold">Bold</option>
                <option value="bold italic">Bold Italic</option>
              </select>
            </div>
        
            <!-- Grup 4: Culoare Font -->
            <div class="control-group">
              <label for="legendColor" data-key="fontColor">Culoare Font:</label>
              <input type="color" id="legendColor" value="#000000" />
            </div>
        
            <!-- Grup 5: Transparență Fundal -->
            <div class="control-group">
              <label for="legendBgTransparency" data-key="bgTransparency">Transparență Fundal:</label>
              <input
                type="range"
                id="legendBgTransparency"
                class="slider"
                min="0"
                max="1"
                step="0.1"
                value="0.8"
              />
            </div>
        
            <!-- Grup 6: Lățime Legendă (px) -->
            <div class="control-group">
              <label for="legendWidth" data-key="legendWidth">Lățime Legendă:</label>
              <input
                type="range"
                id="legendWidth"
                class="slider"
                value="200"
                min="100"
                max="500"
                step="10"
              />
            </div>
        
            <!-- Grup 7: Înălțime Legendă (px) -->
            <div class="control-group">
              <label for="legendHeight" data-key="legendHeight">Înălțime Legendă:</label>
              <input
                type="range"
                id="legendHeight"
                class="slider"
                value="100"
                min="50"
                max="300"
                step="10"
              />
            </div>
        
            <!-- Buton pentru vizibilitatea legendei -->
            <div class="control-group">
              <button
                id="toggleLegend"
                class="btn btn-primary"
                data-key="toggleLegend"
              >
                Ascunde/Adaugă Legenda
              </button>
            </div>
        
            <!-- Buton pentru vizibilitatea legendei numerice -->
            <div class="control-group">
              <button
                id="toggleNumericLegend"
                class="btn btn-primary"
                data-key="toggleNumericLegend"
              >
                Afișează/Ascunde Legenda Numerică
              </button>
            </div>
          </div>
        </section>

        <!-- Add controls for map shape outlines -->
        <section class="control-group">
          <h3 data-key="outlineSettings">Setări Contur</h3>
          <div class="option-section">
            
            <div class="option">
              <label for="outlineColor" data-key="outlineColor">Culoare Contur:</label>
              <input type="color" id="outlineColor" value="#000000" />
            </div>
            
            <div class="option">
              <label for="outlineWidth" data-key="outlineWidth">Lățime Contur (px):</label>
              <input
                type="number"
                id="outlineWidth"
                min="0"
                max="20"
                step="0.1"
                value="0.5"
              />
            </div>
            
            <div class="option">
              <label for="toggleOutline" data-key="toggleOutline">Afișează/Ascunde Conturul:</label>
              <input type="checkbox" id="toggleOutline" checked />
            </div>
            
          </div>
        </section>
        
        <!-- Add before the "Viitoare Funcționalități" section -->
        <section class="control-group">
          <h4 data-key="proportionalCircles">Simboluri proporționale</h4>
          <div class="option-section">
            <div class="option"></div>
              <label for="toggleCircles" data-key="toggleCircles">Afișează/Ascunde simboluri:</label>
              <input type="checkbox" id="toggleCircles" />
            </div>
            
            <div class="option">
              <label for="circleColor" data-key="circleColor">Culoare simboluri:</label>
              <input type="color" id="circleColor" value="#1f77b4" />
            </div>
            
            <div class="option">
              <label for="circleOpacity" data-key="circleOpacity">Opacitate simboluri:</label>
              <input type="range" id="circleOpacity" class="slider" min="0.1" max="1" step="0.1" value="0.6" />
            </div>
            
            <div class="option">
              <label for="circleScale" data-key="circleScale">Scală simboluri:</label>
              <input type="range" id="circleScale" class="slider" min="0.1" max="2" step="0.1" value="1" />
            </div>
            
            <div class="option">
              <label for="legendCircleCount" data-key="legendCircleCount">Număr de simboluri în legendă:</label>
              <input 
                type="number" 
                id="legendCircleCount" 
                min="2" 
                max="6" 
                value="3" 
                class="input-text"
              />
            </div>
          </div>
        </section>

        <!-- Add dark mode toggle button -->
        <section class="control-group">
          <div class="option-section">
            <div class="theme-toggle">
              <label for="darkModeToggle" data-key="darkMode">Dark Mode</label>
              <input type="checkbox" id="darkModeToggle" />
            </div>
          </div>
        </section>

        <!-- Spațiu pentru viitoare funcționalități  -->
        <section class="control-group">
          <h4 data-key="futureFeatures">Viitoare Funcționalități</h4>
          <p data-key="futureFeatureDescription">Aici va fi adăgată funcționalitatea viitoare.</p>
        </section>
      </div>
    </div>
  </div>
  
  <!-- Tooltip pentru informații suplimentare -->
  <div class="tooltip"></div>
  
  <!-- Legătura către fișierul JavaScript -->
  <script src="script.js"></script>
</body>
</html>
